<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Workout Tracker Pro</title>
<style>
:root{--accent:#3b82f6;--muted:#6b7280;--success:#10b981;--danger:#ef4444;--deload:#fbbf24;--bg:#f5f5f5;--card:#fff;--border:#e5e7eb}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:system-ui,sans-serif;background:var(--bg);color:#111;line-height:1.5;padding:16px}
.container{max-width:1100px;margin:0 auto}
.card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.06);margin-bottom:16px}
.btn{padding:10px 16px;border-radius:8px;border:none;font-weight:600;cursor:pointer;transition:all .15s;display:inline-block}
.btn:active{transform:scale(.97)}
.btn-primary{background:var(--accent);color:#fff}
.btn-secondary{background:#e5e7eb;color:#111}
.btn-danger{background:var(--danger);color:#fff}
.btn-sm{padding:6px 12px;font-size:.85rem}
.input{padding:8px 12px;border:1px solid var(--border);border-radius:8px;width:100%;font-size:1rem}
.input:focus{outline:none;border-color:var(--accent)}
.nav{display:flex;gap:8px;margin-bottom:16px;border-bottom:2px solid var(--border);padding-bottom:8px}
.nav-btn{padding:10px 16px;background:none;border:none;font-weight:600;cursor:pointer;color:var(--muted);border-radius:8px 8px 0 0}
.nav-btn.active{background:var(--accent);color:#fff}
.hidden{display:none!important}
.day-setup{border:2px solid var(--border);border-radius:8px;padding:12px;margin-bottom:12px}
.ex-card{border:1px solid var(--border);border-radius:8px;padding:12px;margin-bottom:8px;background:#fafafa}
.week-btn{padding:8px 12px;border-radius:8px;border:2px solid var(--border);background:var(--card);font-weight:600;cursor:pointer;min-width:70px}
.week-btn.active{background:var(--accent);color:#fff;border-color:var(--accent)}
.week-btn.comp{background:#d1fae5;border-color:var(--success)}
.week-btn.deload{background:#fef3c7;border-color:var(--deload)}
.day-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:12px}
.day-card{border:2px solid var(--border);border-radius:12px;padding:16px;cursor:pointer;transition:all .2s;background:var(--card)}
.day-card:hover{transform:translateY(-2px)}
.day-card.comp{background:#d1fae5;border-color:var(--success)}
.day-card.rest{background:#f3f4f6}
.wo-ex{border:2px solid var(--border);border-radius:12px;padding:16px;margin-bottom:16px;background:var(--card)}
.wo-ex.active{border-color:var(--accent);background:#eff6ff}
.set-btn{padding:12px 16px;border-radius:8px;border:2px solid var(--border);background:var(--card);cursor:pointer;min-width:70px;font-weight:600;display:inline-flex;align-items:center;justify-content:center}
.set-btn:active{transform:scale(.95)}
.set-btn.pass{background:var(--success);border-color:var(--success);color:#fff}
.set-btn.fail{background:var(--danger);border-color:var(--danger);color:#fff}
.prog-bar{height:8px;background:#e5e7eb;border-radius:4px;overflow:hidden;margin-top:8px}
.prog-fill{height:100%;background:var(--success);transition:width .3s}
.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:1000;padding:16px}
.modal-content{background:var(--card);border-radius:12px;padding:24px;max-width:600px;width:100%;max-height:90vh;overflow-y:auto}
.template-item{border:2px solid var(--border);border-radius:8px;padding:12px;margin-bottom:12px;cursor:pointer;transition:all .15s}
.template-item:hover{border-color:var(--accent);transform:translateY(-2px)}
.muted{color:var(--muted);font-size:.9rem}
@media(max-width:640px){.day-grid{grid-template-columns:1fr}}
</style>
</head>
<body>
<div class="container">
<div class="card"><h1 style="margin-bottom:4px">Workout Tracker Pro</h1><p class="muted">Build your custom program and track progress</p></div>
<div class="nav">
<button class="nav-btn active" id="setupNav">‚öôÔ∏è Setup</button>
<button class="nav-btn" id="workoutNav">üí™ Workout</button>
</div>
<div id="app"></div>
</div>
<script>
const App={t:null,p:{},cw:1,v:'setup',wm:{on:0,d:0,i:0},ed:new Set(),dt:{}};
const P='wt_v3_';
const S={get(){const r=localStorage.getItem(P+'t');return r?JSON.parse(r):{n:'My Program',w:12,de:4,dp:65,days:{}}},save(d){localStorage.setItem(P+'t',JSON.stringify(d))},getP(){const r=localStorage.getItem(P+'p');return r?JSON.parse(r):{}},saveP(d){localStorage.setItem(P+'p',JSON.stringify(d))},getW(){return parseInt(localStorage.getItem(P+'w')||'1',10)},setW(w){localStorage.setItem(P+'w',w)},reset(){if(confirm('Reset ALL?')){Object.keys(localStorage).forEach(k=>{if(k.startsWith(P))localStorage.removeItem(k)});location.reload()}}};
const TEMPS={
beginner:{n:'Beginner 3-Day',w:8,de:4,dp:65,days:{1:{n:'Full Body A',ex:[{n:'Goblet Squats',s:3,r:'10-12',w:1},{n:'Push-Ups',s:3,r:'8-12'},{n:'Bent Over Rows',s:3,r:'10-12',w:1}]},2:{n:'Rest',rest:1},3:{n:'Full Body B',ex:[{n:'Romanian Deadlifts',s:3,r:'10-12',w:1},{n:'Incline DB Press',s:3,r:'8-12',w:1}]}}},
upper_lower:{n:'Upper/Lower 4-Day',w:12,de:4,dp:65,days:{1:{n:'Upper Push',ex:[{n:'Incline DB Press',s:4,r:'8-10',w:1},{n:'Standing OH Press',s:3,r:'8-10',w:1},{n:'Lateral Raises',s:3,r:'12-15',w:1}]},2:{n:'Lower Body',ex:[{n:'Goblet Squats',s:4,r:'8-12',w:1},{n:'Romanian Deadlifts',s:4,r:'8-10',w:1}]},3:{n:'Rest',rest:1},4:{n:'Upper Pull',ex:[{n:'Pull-Ups',s:4,r:'AMRAP',a:1},{n:'Bent Over Rows',s:4,r:'8-10',w:1}]}}},
minimalist:{n:'Minimalist 3-Day',w:12,de:4,dp:70,days:{1:{n:'Push+Legs',ex:[{n:'Goblet Squats',s:4,r:'8-10',w:1},{n:'Incline DB Press',s:4,r:'8-10',w:1}]},2:{n:'Rest',rest:1},3:{n:'Pull+Legs',ex:[{n:'Romanian Deadlifts',s:4,r:'8-10',w:1},{n:'Pull-Ups',s:4,r:'AMRAP',a:1}]}}}
};
const EX={push:['Incline DB Press','Flat DB Press','Standing OH Press','Lateral Raises','Push-Ups'],pull:['Pull-Ups','Bent Over Rows','Single Arm Rows','Hammer Curls'],legs:['Goblet Squats','Bulgarian Split Squats','Romanian Deadlifts','Glute Bridges','Calf Raises'],core:['Plank','Russian Twists','Dead Bugs']};
function deb(k,f,d=300){clearTimeout(App.dt[k]);App.dt[k]=setTimeout(f,d)}
function isDL(w){return App.t.de>0&&w%App.t.de===0}
function getP(w,d,e,s){return App.p[`${w}|${d}|${e}|${s}`]||null}
function setP(w,d,e,s,v){const k=`${w}|${d}|${e}|${s}`;if(v===null)delete App.p[k];else App.p[k]=v;deb('sp',()=>S.saveP(App.p))}
function getDC(w,d){const dd=App.t.days[d];if(!dd)return 0;if(dd.rest)return getP(w,d,'rest','c')?100:0;if(!dd.ex)return 0;let t=0,c=0;dd.ex.forEach((e,i)=>{for(let s=1;s<=e.s;s++){t++;if(getP(w,d,i,s))c++}});return t>0?Math.round(c/t*100):0}
function getWC(w){const ds=Object.keys(App.t.days);if(!ds.length)return 0;return Math.round(ds.reduce((a,d)=>a+getDC(w,d),0)/ds.length)}
function r(){if(App.v==='setup')rSetup();else rWorkout()}
function rSetup(){const ds=Object.keys(App.t.days).sort((a,b)=>a-b);
app.innerHTML=`<div class="card"><h3>Settings</h3><button class="btn btn-secondary btn-sm" onclick="showTmpl()" style="margin-bottom:12px">üìã Load Template</button><label style="display:block;margin-bottom:8px">Name<input class="input" value="${App.t.n}" id="pn"></label><div style="display:grid;grid-template-columns:repeat(3,1fr);gap:12px"><label class="muted">Weeks<input type="number" class="input" min="1" value="${App.t.w}" id="pw"></label><label class="muted">Deload Every<input type="number" class="input" min="0" value="${App.t.de}" id="pde"></label><label class="muted">Deload %<input type="number" class="input" value="${App.t.dp}" id="pdp"></label></div><button class="btn btn-danger btn-sm" onclick="S.reset()" style="margin-top:12px">Reset All</button></div><div class="card"><div style="display:flex;justify-content:space-between;margin-bottom:12px"><h3>Days</h3><button class="btn btn-primary btn-sm" onclick="addD()">+ Day</button></div>${ds.length?ds.map(d=>{const dd=App.t.days[d];const exp=App.ed.has(d);return`<div class="day-setup"><div style="display:flex;justify-content:space-between;cursor:pointer;margin-bottom:8px" onclick="togD(${d})"><div><strong>Day ${d}: ${dd.n||'?'}</strong> ${exp?'‚ñº':'‚ñ∂'}</div><div style="display:flex;gap:8px"><label onclick="event.stopPropagation()"><input type="checkbox" ${dd.rest?'checked':''} onchange="App.t.days[${d}].rest=this.checked;S.save(App.t);r()"> Rest</label><button class="btn btn-danger btn-sm" onclick="event.stopPropagation();delD(${d})">X</button></div></div>${exp?`<input class="input" value="${dd.n||''}" placeholder="Name" onchange="App.t.days[${d}].n=this.value;deb('sn',()=>S.save(App.t))" style="margin-bottom:8px">${dd.rest?'<p class="muted">Rest day</p>':`<button class="btn btn-secondary btn-sm" onclick="showEx(${d})">+ Exercise</button>${(dd.ex||[]).map((e,i)=>`<div class="ex-card" style="margin-top:8px"><div style="display:flex;justify-content:space-between;margin-bottom:8px"><strong>${e.n}</strong><button class="btn btn-danger btn-sm" onclick="delEx(${d},${i})">X</button></div><div style="display:flex;gap:8px;flex-wrap:wrap"><label class="muted">Sets<input type="number" min="1" value="${e.s}" style="width:60px;padding:4px" onchange="App.t.days[${d}].ex[${i}].s=+this.value;S.save(App.t)"></label><label class="muted">Reps<input value="${e.r}" style="width:80px;padding:4px" onchange="App.t.days[${d}].ex[${i}].r=this.value;S.save(App.t)"></label><label><input type="checkbox" ${e.w?'checked':''} onchange="App.t.days[${d}].ex[${i}].w=this.checked;S.save(App.t)"> Weight</label><label><input type="checkbox" ${e.a?'checked':''} onchange="App.t.days[${d}].ex[${i}].a=this.checked;S.save(App.t)"> AMRAP</label></div></div>`).join('')}`}`:''}</div>`}).join(''):'<p class="muted">No days</p>'}</div>`;
document.getElementById('pn').oninput=e=>{App.t.n=e.target.value;deb('sn',()=>S.save(App.t))};
document.getElementById('pw').onchange=e=>{App.t.w=+e.target.value;S.save(App.t);r()};
document.getElementById('pde').onchange=e=>{App.t.de=+e.target.value;S.save(App.t);r()};
document.getElementById('pdp').onchange=e=>{App.t.dp=+e.target.value;S.save(App.t)}}
function rWorkout(){if(App.wm.on){rAW();return}const ws=[];for(let w=1;w<=App.t.w;w++){const c=getWC(w);ws.push(`<button class="week-btn ${w===App.cw?'active':''} ${c===100?'comp':''} ${isDL(w)?'deload':''}" onclick="App.cw=${w};r()">W${w}${isDL(w)?' üîÑ':''}<div style="font-size:.7rem">${c}%</div></button>`)}const ds=Object.keys(App.t.days).sort((a,b)=>a-b);app.innerHTML=`<div class="card"><div style="display:flex;justify-content:space-between;align-items:center"><div><h3>Week ${App.cw}${isDL(App.cw)?' üîÑ':''}</h3><p class="muted">${App.t.n}</p></div><div style="text-align:right"><div style="font-weight:600">${getWC(App.cw)}%</div><div class="prog-bar" style="width:100px"><div class="prog-fill" style="width:${getWC(App.cw)}%"></div></div></div></div><div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:12px">${ws.join('')}</div></div>${isDL(App.cw)?`<div style="background:#fef3c7;border:2px solid var(--deload);border-radius:8px;padding:12px;margin-bottom:16px;text-align:center"><strong>üîÑ Deload Week - ${App.t.dp}%</strong></div>`:''}<div class="day-grid">${ds.map(d=>{const dd=App.t.days[d];const c=getDC(App.cw,d);return`<div class="day-card ${c===100?'comp':''} ${dd.rest?'rest':''}" onclick="${dd.rest?'':'stW('+d+')'}"><div style="font-size:1.1rem;font-weight:700">Day ${d}</div><div class="muted">${dd.n||'?'}</div>${dd.rest?`<label style="margin-top:8px" onclick="event.stopPropagation()"><input type="checkbox" ${getP(App.cw,d,'rest','c')?'checked':''} onchange="setP(App.cw,${d},'rest','c',this.checked?1:null);r()"> Complete</label>`:`<div class="prog-bar" style="margin-top:8px"><div class="prog-fill" style="width:${c}%"></div></div><button class="btn btn-primary btn-sm" style="margin-top:8px;width:100%" onclick="event.stopPropagation();stW(${d})">Start</button>`}</div>`}).join('')}</div>`}
function rAW(){const d=App.wm.d;const dd=App.t.days[d];const exs=dd.ex||[];const ce=exs[App.wm.i];if(!ce){App.wm.on=0;r();return}const wt=getP(App.cw,d,App.wm.i,'weight');const nw=(App.cw%App.t.w)+1;app.innerHTML=`<div style="position:sticky;top:0;background:var(--card);padding:12px;border-radius:8px;margin-bottom:16px;box-shadow:0 2px 8px rgba(0,0,0,.1);z-index:10"><div style="display:flex;justify-content:space-between"><button class="btn btn-secondary btn-sm" onclick="exW()">‚Üê Exit</button><div style="text-align:center"><strong>Day ${d}: ${dd.n}</strong><div class="muted">Ex ${App.wm.i+1}/${exs.length}</div></div><div style="width:60px"></div></div></div>${exs.map((e,i)=>{const act=i===App.wm.i;const ewt=getP(App.cw,d,i,'weight');const nwt=getP(nw,d,i,'weight');return`<div class="wo-ex ${act?'active':''}" style="${!act?'opacity:.4':''}"><div style="font-size:1.2rem;font-weight:700">${e.n}</div><div class="muted">${e.r} √ó ${e.s} sets${e.a?' (AMRAP)':''}</div>${e.w?`${act&&!ewt?`<div style="background:#fef3c7;padding:12px;border-radius:8px;margin-top:8px"><strong>Set Weight</strong><div style="display:flex;gap:8px;margin-top:8px"><input type="number" class="input" id="wi${i}" placeholder="lbs" style="width:100px"><button class="btn btn-primary btn-sm" onclick="setWt(${i})">Set</button></div></div>`:`<div style="font-size:1.3rem;font-weight:700;color:var(--accent);margin-top:8px">${ewt} lbs</div>`}`:''}${act?`<div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:12px">${Array.from({length:e.s},(_,s)=>{const st=getP(App.cw,d,i,s+1);return`<button class="set-btn ${st==='p'?'pass':st==='f'?'fail':''}" onclick="togS(${i},${s+1})">${e.a?'‚úì':`<div style="display:flex;width:100%"><div style="flex:1;border-right:1px solid var(--border);padding:8px">‚úì</div><div style="flex:1;padding:8px">‚úó</div></div>`}</button>${e.a?`<input type="number" class="input" value="${getP(App.cw,d,i+100+s,0)||''}" style="width:70px;padding:8px;text-align:center" onchange="setP(App.cw,${d},${i+100+s},0,+this.value);r()">`:''}`}).join('')}</div>${e.a?`<div style="margin-top:8px;font-weight:600">Total: ${Array.from({length:e.s},(_,s)=>getP(App.cw,d,i+100+s,0)||0).reduce((a,b)=>a+b,0)}</div>`:''}${e.w&&ewt?`<div style="margin-top:12px;padding:12px;background:#f9fafb;border-radius:8px"><strong style="display:block;margin-bottom:8px">Next Week Adjustment</strong><div class="muted" style="margin-bottom:8px">Planned: ${nwt||'none'}</div><div style="display:flex;gap:6px;flex-wrap:wrap">${[-10,-5,-3,-2,0,2,3,5,10].map(dl=>`<button class="btn btn-sm ${nwt&&nwt===ewt+dl?'btn-primary':'btn-secondary'}" onclick="setP(${nw},${d},${i},'weight',${ewt+dl});r()">${dl>0?'+'+dl:dl}</button>`).join('')}<input type="number" class="input" id="cw${i}" placeholder="Custom" value="${nwt&&![-10,-5,-3,-2,0,2,3,5,10].some(dl=>ewt+dl===nwt)?nwt:''}" style="width:80px;padding:6px" onchange="setP(${nw},${d},${i},'weight',+this.value);r()"><button class="btn btn-danger btn-sm" onclick="setP(${nw},${d},${i},'weight',null);r()">Clear</button></div></div>`:''}`:''}

</div>`}).join('')}<div style="display:flex;gap:8px;margin-top:16px"><button class="btn btn-secondary" ${App.wm.i===0?'disabled':''} onclick="App.wm.i--;r()">‚Üê Prev</button><button class="btn btn-secondary" style="flex:1" onclick="exW()">All</button><button class="btn btn-secondary" ${App.wm.i>=exs.length-1?'disabled':''} onclick="App.wm.i++;r()">Next ‚Üí</button></div>`}
function addD(){const n=Math.max(0,...Object.keys(App.t.days).map(Number))+1;App.t.days[n]={n:'',ex:[]};App.ed.clear();App.ed.add(n);S.save(App.t);r()}
function delD(d){delete App.t.days[d];App.ed.delete(d);S.save(App.t);r()}
function togD(d){App.ed.has(d)?App.ed.delete(d):App.ed.add(d);r()}
function delEx(d,i){App.t.days[d].ex.splice(i,1);S.save(App.t);r()}
function stW(d){App.wm={on:1,d:d,i:0};r()}
function exW(){App.wm.on=0;r()}
function togS(i,s){const st=getP(App.cw,App.wm.d,i,s);const e=App.t.days[App.wm.d].ex[i];if(e.a){setP(App.cw,App.wm.d,i,s,st==='p'?null:'p')}else{const cl=event.clientX-event.target.getBoundingClientRect().left;const half=cl<event.target.offsetWidth/2;if(st==='p'&&half||st==='f'&&!half)setP(App.cw,App.wm.d,i,s,null);else setP(App.cw,App.wm.d,i,s,half?'p':'f')}r()}
function setWt(i){const v=+document.getElementById('wi'+i).value;if(v>0){setP(App.cw,App.wm.d,i,'weight',v);r()}}
function showTmpl(){const d=document.createElement('div');d.className='modal-overlay';d.innerHTML=`<div class="modal-content"><h3 style="margin-bottom:12px">Load Template</h3>${Object.keys(TEMPS).map(k=>{const t=TEMPS[k];return`<div class="template-item" onclick="loadT('${k}')"><strong style="font-size:1.1rem">${t.n}</strong><div class="muted">${t.w} weeks ‚Ä¢ ${Object.keys(t.days).length} days</div></div>`}).join('')}<button class="btn btn-secondary" style="width:100%;margin-top:12px" onclick="this.closest('.modal-overlay').remove()">Cancel</button></div>`;d.onclick=e=>{if(e.target===d)d.remove()};document.body.appendChild(d)}
function loadT(k){if(confirm('Load template? Current program will be replaced.')){App.t=JSON.parse(JSON.stringify(TEMPS[k]));S.save(App.t);App.ed.clear();document.querySelector('.modal-overlay')?.remove();r()}}
function showEx(d){const dd=document.createElement('div');dd.className='modal-overlay';dd.innerHTML=`<div class="modal-content"><h3>Add Exercise</h3>${Object.keys(EX).map(c=>`<div style="font-weight:700;margin:12px 0">${c.toUpperCase()}</div>${EX[c].map(e=>`<div class="template-item" onclick="addEx(${d},'${e.replace(/'/g,"\\'")}')"><strong>${e}</strong></div>`).join('')}`).join('')}<button class="btn btn-secondary" style="width:100%;margin-top:12px" onclick="this.closest('.modal-overlay').remove()">Cancel</button></div>`;dd.onclick=e=>{if(e.target===dd)dd.remove()};document.body.appendChild(dd)}
function addEx(d,n){if(!App.t.days[d].ex)App.t.days[d].ex=[];App.t.days[d].ex.push({n:n,s:3,r:'8-12',w:1});S.save(App.t);document.querySelector('.modal-overlay')?.remove();r()}
document.getElementById('setupNav').onclick=()=>{App.v='setup';document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));setupNav.classList.add('active');r()};
document.getElementById('workoutNav').onclick=()=>{App.v='workout';document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));workoutNav.classList.add('active');r()};
App.t=S.get();App.p=S.getP();App.cw=S.getW();r();
if('wakeLock'in navigator)document.addEventListener('click',async()=>{try{await navigator.wakeLock.request('screen')}catch(e){}},{once:1});
</script>
</body>
</html>
