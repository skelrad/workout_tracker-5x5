const EX={push:['Incline DB Press','Flat DB Press','Decline DB Press','Floor Press','DB Fly','Incline Fly','Push-Ups','Wide Push-Ups','Diamond Push-Ups','Pike Push-Ups','Standing OH Press','Arnold Press','Lateral Raises','Front Raises','Rear Delt Fly','Face Pulls','OH Tricep Ext','Tricep Kickbacks','Dips'],pull:['Pull-Ups','Chin-Ups','Bent Over Rows','Single Arm Rows','Renegade Rows','DB Pullovers','Inverted Rows','Reverse Flys','Shrugs','Bicep Curls','Hammer Curls','Cross-Body Curls','Zottman Curls','Concentration Curls'],legs:['Goblet Squats','Bulgarian Split Squats','Forward Lunges','Reverse Lunges','Walking Lunges','Step-Ups','Romanian Deadlifts','Single Leg RDL','Sumo Squats','Glute Bridges','Hip Thrusts','Calf Raises','Jump Squats'],core:['Plank','Side Plank','Russian Twists','DB Woodchoppers','Mountain Climbers','Bicycle Crunches','Dead Bugs','Bird Dogs','Turkish Get-Ups','Leg Raises'],fullbody:['DB Clean & Press','Thrusters','DB Swings','Burpees','Man Makers','Devil Press','DB Snatches','Farmers Walks'],cardio:['Yoga Flow','Jump Rope','High Knees','Jumping Jacks','Stretching','Mobility Work']};
const TEMPS={
  beginner:{n:'Beginner 3-Day Full Body',w:8,de:4,dp:65,days:{1:{n:'Full Body A',ex:[{n:'Goblet Squats',s:3,r:'10-12',w:1},{n:'Push-Ups',s:3,r:'8-12',w:0},{n:'Bent Over Rows',s:3,r:'10-12',w:1},{n:'Standing OH Press',s:3,r:'8-10',w:1},{n:'Plank',s:3,r:'30-45s',w:0}]},2:{n:'Rest/Cardio',r:1},3:{n:'Full Body B',ex:[{n:'Romanian Deadlifts',s:3,r:'10-12',w:1},{n:'Incline DB Press',s:3,r:'8-12',w:1},{n:'Single Arm Rows',s:3,r:'10-12',w:1},{n:'Lateral Raises',s:3,r:'12-15',w:1},{n:'Glute Bridges',s:3,r:'12-15',w:1}]},4:{n:'Rest/Cardio',r:1},5:{n:'Full Body C',ex:[{n:'Bulgarian Split Squats',s:3,r:'10-12',w:1},{n:'Floor Press',s:3,r:'8-12',w:1},{n:'Pull-Ups',s:3,r:'AMRAP',w:0,a:1},{n:'Hammer Curls',s:3,r:'10-12',w:1},{n:'Calf Raises',s:3,r:'15-20',w:1}]},6:{n:'Rest/Cardio',r:1},7:{n:'Active Recovery',r:1}}},
  upper_lower:{n:'Upper/Lower 4-Day Split',w:12,de:4,dp:65,days:{1:{n:'Upper Push',ex:[{n:'Incline DB Press',s:4,r:'8-10',w:1},{n:'Standing OH Press',s:3,r:'8-10',w:1},{n:'Dips',s:3,r:'6-10',w:0},{n:'Lateral Raises',s:3,r:'12-15',w:1},{n:'OH Tricep Ext',s:3,r:'10-12',w:1},{n:'Face Pulls',s:2,r:'15-20',w:0}]},2:{n:'Lower Quad Focus',ex:[{n:'Goblet Squats',s:4,r:'8-12',w:1},{n:'Bulgarian Split Squats',s:3,r:'10-12',w:1},{n:'Romanian Deadlifts',s:4,r:'8-10',w:1},{n:'Glute Bridges',s:3,r:'12-15',w:1},{n:'Calf Raises',s:3,r:'15-20',w:1}]},3:{n:'Rest/Cardio',r:1},4:{n:'Upper Pull',ex:[{n:'Pull-Ups',s:4,r:'AMRAP',w:0,a:1},{n:'Bent Over Rows',s:4,r:'8-10',w:1},{n:'Single Arm Rows',s:3,r:'10-12',w:1},{n:'Reverse Flys',s:3,r:'12-15',w:1},{n:'Hammer Curls',s:3,r:'10-12',w:1},{n:'Face Pulls',s:2,r:'15-20',w:0}]},5:{n:'Lower Hamstring Focus',ex:[{n:'Romanian Deadlifts',s:4,r:'8-10',w:1},{n:'Walking Lunges',s:3,r:'12-15',w:1},{n:'Single Leg RDL',s:3,r:'10-12',w:1},{n:'Glute Bridges',s:3,r:'12-15',w:1},{n:'Calf Raises',s:3,r:'15-20',w:1}]},6:{n:'Rest',r:1},7:{n:'Active Recovery',r:1}}},
  push_pull_legs:{n:'Push/Pull/Legs 6-Day',w:12,de:4,dp:65,days:{1:{n:'Push',ex:[{n:'Incline DB Press',s:4,r:'8-12',w:1},{n:'Standing OH Press',s:4,r:'8-10',w:1},{n:'Lateral Raises',s:3,r:'12-15',w:1},{n:'OH Tricep Ext',s:3,r:'10-12',w:1},{n:'Face Pulls',s:3,r:'15-20',w:0}]},2:{n:'Pull',ex:[{n:'Pull-Ups',s:4,r:'AMRAP',w:0,a:1},{n:'Bent Over Rows',s:4,r:'8-12',w:1},{n:'Single Arm Rows',s:3,r:'10-12',w:1},{n:'Hammer Curls',s:3,r:'10-12',w:1},{n:'Reverse Flys',s:3,r:'12-15',w:1}]},3:{n:'Legs',ex:[{n:'Goblet Squats',s:4,r:'8-12',w:1},{n:'Romanian Deadlifts',s:4,r:'8-10',w:1},{n:'Bulgarian Split Squats',s:3,r:'10-12',w:1},{n:'Glute Bridges',s:3,r:'12-15',w:1},{n:'Calf Raises',s:3,r:'15-20',w:1}]},4:{n:'Push',ex:[{n:'Flat DB Press',s:4,r:'8-12',w:1},{n:'Arnold Press',s:3,r:'8-10',w:1},{n:'Lateral Raises',s:3,r:'12-15',w:1},{n:'Tricep Kickbacks',s:3,r:'10-12',w:1},{n:'Push-Ups',s:3,r:'AMRAP',w:0,a:1}]},5:{n:'Pull',ex:[{n:'Chin-Ups',s:4,r:'AMRAP',w:0,a:1},{n:'DB Pullovers',s:3,r:'10-12',w:1},{n:'Single Arm Rows',s:4,r:'10-12',w:1},{n:'Bicep Curls',s:3,r:'10-12',w:1},{n:'Shrugs',s:3,r:'12-15',w:1}]},6:{n:'Legs',ex:[{n:'Sumo Squats',s:4,r:'8-12',w:1},{n:'Walking Lunges',s:3,r:'12-15',w:1},{n:'Single Leg RDL',s:3,r:'10-12',w:1},{n:'Hip Thrusts',s:3,r:'12-15',w:1},{n:'Jump Squats',s:3,r:'10-15',w:0}]},7:{n:'Active Recovery',r:1}}},
  minimalist:{n:'Minimalist 3-Day (40s Focused)',w:12,de:4,dp:70,days:{1:{n:'Push + Legs',ex:[{n:'Goblet Squats',s:4,r:'8-10',w:1},{n:'Incline DB Press',s:4,r:'8-10',w:1},{n:'Standing OH Press',s:3,r:'8-10',w:1},{n:'Lateral Raises',s:3,r:'12-15',w:1},{n:'Calf Raises',s:3,r:'15-20',w:1}]},2:{n:'Rest/Cardio',r:1},3:{n:'Pull + Legs',ex:[{n:'Romanian Deadlifts',s:4,r:'8-10',w:1},{n:'Pull-Ups',s:4,r:'AMRAP',w:0,a:1},{n:'Bent Over Rows',s:4,r:'8-10',w:1},{n:'Hammer Curls',s:3,r:'10-12',w:1},{n:'Glute Bridges',s:3,r:'12-15',w:1}]},4:{n:'Rest/Cardio',r:1},5:{n:'Full Body',ex:[{n:'Bulgarian Split Squats',s:3,r:'10-12',w:1},{n:'Push-Ups',s:3,r:'AMRAP',w:0,a:1},{n:'Single Arm Rows',s:3,r:'10-12',w:1},{n:'Reverse Flys',s:3,r:'12-15',w:1},{n:'Plank',s:3,r:'45-60s',w:0}]},6:{n:'Rest/Cardio',r:1},7:{n:'Active Recovery',r:1}}},
  strength_focused:{n:'Strength Focus (Low Rep)',w:12,de:4,dp:60,days:{1:{n:'Upper Push',ex:[{n:'Flat DB Press',s:5,r:'5-6',w:1},{n:'Standing OH Press',s:4,r:'5-6',w:1},{n:'Incline DB Press',s:3,r:'6-8',w:1},{n:'Dips',s:3,r:'5-8',w:0},{n:'OH Tricep Ext',s:3,r:'8-10',w:1}]},2:{n:'Lower Body',ex:[{n:'Goblet Squats',s:5,r:'5-6',w:1},{n:'Romanian Deadlifts',s:5,r:'5-6',w:1},{n:'Bulgarian Split Squats',s:3,r:'6-8',w:1},{n:'Glute Bridges',s:3,r:'10-12',w:1}]},3:{n:'Rest',r:1},4:{n:'Upper Pull',ex:[{n:'Pull-Ups',s:5,r:'AMRAP',w:0,a:1},{n:'Bent Over Rows',s:5,r:'5-6',w:1},{n:'Single Arm Rows',s:3,r:'6-8',w:1},{n:'Hammer Curls',s:3,r:'8-10',w:1}]},5:{n:'Rest',r:1},6:{n:'Full Body Light',ex:[{n:'Goblet Squats',s:3,r:'10-12',w:1},{n:'Push-Ups',s:3,r:'10-15',w:0},{n:'Single Arm Rows',s:3,r:'10-12',w:1},{n:'Face Pulls',s:3,r:'15-20',w:0}]},7:{n:'Active Recovery',r:1}}},
  hypertrophy:{n:'Hypertrophy (Muscle Growth)',w:12,de:4,dp:65,days:{1:{n:'Chest + Triceps',ex:[{n:'Incline DB Press',s:4,r:'8-12',w:1},{n:'Flat DB Press',s:4,r:'8-12',w:1},{n:'DB Fly',s:3,r:'12-15',w:1},{n:'OH Tricep Ext',s:3,r:'10-12',w:1},{n:'Tricep Kickbacks',s:3,r:'12-15',w:1}]},2:{n:'Back + Biceps',ex:[{n:'Bent Over Rows',s:4,r:'8-12',w:1},{n:'Single Arm Rows',s:4,r:'10-12',w:1},{n:'DB Pullovers',s:3,r:'10-12',w:1},{n:'Bicep Curls',s:4,r:'10-12',w:1},{n:'Hammer Curls',s:3,r:'10-12',w:1}]},3:{n:'Legs',ex:[{n:'Goblet Squats',s:4,r:'10-12',w:1},{n:'Romanian Deadlifts',s:4,r:'10-12',w:1},{n:'Bulgarian Split Squats',s:3,r:'12-15',w:1},{n:'Walking Lunges',s:3,r:'12-15',w:1},{n:'Calf Raises',s:4,r:'15-20',w:1}]},4:{n:'Shoulders',ex:[{n:'Standing OH Press',s:4,r:'8-10',w:1},{n:'Arnold Press',s:3,r:'8-10',w:1},{n:'Lateral Raises',s:4,r:'12-15',w:1},{n:'Front Raises',s:3,r:'12-15',w:1},{n:'Reverse Flys',s:3,r:'15-20',w:1}]},5:{n:'Arms + Core',ex:[{n:'Bicep Curls',s:4,r:'10-12',w:1},{n:'Hammer Curls',s:3,r:'10-12',w:1},{n:'OH Tricep Ext',s:4,r:'10-12',w:1},{n:'Dips',s:3,r:'8-12',w:0},{n:'Plank',s:3,r:'45-60s',w:0}]},6:{n:'Rest/Cardio',r:1},7:{n:'Active Recovery',r:1}}}
};
function showTemplates(){modal.innerHTML=`<div class="modal" onclick="if(event.target===this)modal.innerHTML=''"><div class="modal-content"><h3>Load Template Program</h3><p class="muted" style="margin-bottom:16px">Choose a pre-built program. You can customize it after loading.</p>${Object.keys(TEMPS).map(k=>{const t=TEMPS[k];return`<div style="border:2px solid var(--border);border-radius:8px;padding:12px;margin-bottom:12px;cursor:pointer;transition:all .15s" onmouseover="this.style.borderColor='var(--accent)'" onmouseout="this.style.borderColor='var(--border)'" onclick="loadTemp('${k}')"><strong style="font-size:1.1rem">${t.n}</strong><div class="muted" style="margin-top:4px">${t.w} weeks ‚Ä¢ ${Object.keys(t.days).length} days ‚Ä¢ Deload every ${t.de} weeks (${t.dp}%)</div></div>`}).join('')}<button class="btn btn-secondary" style="width:100%;margin-top:8px" onclick="modal.innerHTML=''">Cancel</button></div></div>`;modal.style.display='block'}
function loadTemp(k){if(confirm('Load this template? Current program will be replaced.')){dt=JSON.parse(JSON.stringify(TEMPS[k]));S.save(dt);expDays.clear();modal.innerHTML='';r()}}<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Workout Tracker Pro</title>
<style>
:root{--accent:#3b82f6;--muted:#6b7280;--success:#10b981;--danger:#ef4444;--deload:#fbbf24;--bg:#f5f5f5;--card:#fff;--border:#e5e7eb}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:system-ui,sans-serif;background:var(--bg);color:#111;line-height:1.5}
.container{max-width:1100px;margin:0 auto;padding:16px}
.card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.06);margin-bottom:16px}
.btn{padding:10px 16px;border-radius:8px;border:none;font-weight:600;cursor:pointer;transition:all .15s}
.btn:active{transform:scale(.97)}
.btn-primary{background:var(--accent);color:#fff}
.btn-secondary{background:#e5e7eb;color:#111}
.btn-success{background:var(--success);color:#fff}
.btn-danger{background:var(--danger);color:#fff}
.btn-sm{padding:6px 12px;font-size:.85rem}
.input{padding:8px 12px;border:1px solid var(--border);border-radius:8px;width:100%}
.input:focus{outline:none;border-color:var(--accent)}
.nav{display:flex;gap:8px;margin-bottom:16px;border-bottom:2px solid var(--border);padding-bottom:8px}
.nav-btn{padding:10px 16px;background:none;border:none;font-weight:600;cursor:pointer;color:var(--muted)}
.nav-btn.active{background:var(--accent);color:#fff;border-radius:8px 8px 0 0}
.hidden{display:none!important}
.exercise-lib{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:12px;max-height:400px;overflow-y:auto}
.ex-item{padding:12px;border:2px solid var(--border);border-radius:8px;cursor:pointer;transition:all .15s}
.ex-item:hover{border-color:var(--accent)}
.ex-item.sel{border-color:var(--accent);background:#eff6ff}
.day-setup{border:2px solid var(--border);border-radius:8px;padding:12px;margin-bottom:12px}
.ex-card{border:1px solid var(--border);border-radius:8px;padding:12px;margin-bottom:8px;background:#fafafa}
.week-sel{display:flex;gap:8px;flex-wrap:wrap}
.week-btn{padding:8px 12px;border-radius:8px;border:2px solid var(--border);background:var(--card);font-weight:600;cursor:pointer;min-width:70px}
.week-btn.active{background:var(--accent);color:#fff;border-color:var(--accent)}
.week-btn.comp{background:#d1fae5;border-color:var(--success)}
.week-btn.deload{background:#fef3c7;border-color:var(--deload)}
.day-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:12px}
.day-card{border:2px solid var(--border);border-radius:12px;padding:16px;cursor:pointer;transition:all .2s}
.day-card:hover{transform:translateY(-2px)}
.day-card.comp{background:#d1fae5;border-color:var(--success)}
.day-card.rest{background:#f3f4f6}
.wo-ex{border:2px solid var(--border);border-radius:12px;padding:16px;margin-bottom:16px}
.wo-ex.active{border-color:var(--accent);background:#eff6ff}
.set-grid{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
.set-btn{padding:12px 16px;border-radius:8px;border:2px solid var(--border);background:var(--card);cursor:pointer;min-width:70px;font-weight:600}
.set-btn:active{transform:scale(.95)}
.set-btn.pass{background:var(--success);border-color:var(--success);color:#fff}
.set-btn.fail{background:var(--danger);border-color:var(--danger);color:#fff}
.amrap-in{width:70px;padding:8px;border:1px solid var(--border);border-radius:8px;text-align:center}
.wt-disp{font-size:1.3rem;font-weight:700;color:var(--accent);margin-top:8px}
.deload-ind{background:#fef3c7;border:2px solid var(--deload);border-radius:8px;padding:12px;margin-bottom:16px;text-align:center}
.prog-bar{height:8px;background:#e5e7eb;border-radius:4px;overflow:hidden;margin-top:8px}
.prog-fill{height:100%;background:var(--success);transition:width .3s}
.modal{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:1000;padding:16px}
.modal-content{background:var(--card);border-radius:12px;padding:24px;max-width:600px;width:100%;max-height:90vh;overflow-y:auto}
.flex-bet{display:flex;justify-content:space-between;align-items:center}
.muted{color:var(--muted);font-size:.9rem}
@media(max-width:640px){.ex-lib,.day-grid{grid-template-columns:1fr}.set-btn{min-width:60px;padding:10px 12px}}
</style>
</head>
<body>
<div class="container">
<div class="card"><h1 style="margin-bottom:4px">Workout Tracker Pro</h1><p class="muted">Build your custom program and track progress</p></div>
<div class="nav"><button class="nav-btn active" onclick="switchView('setup')">‚öôÔ∏è Setup</button><button class="nav-btn" onclick="switchView('workout')">üí™ Workout</button></div>
<div id="app"></div>
</div>
<div id="modal"></div>
<script>
const TEMPS={
  beginner:{n:'Beginner 3-Day Full Body',w:8,de:4,dp:65,days:{1:{n:'Full Body A',ex:[{n:'Goblet Squats',s:3,r:'10-12',w:1},{n:'Push-Ups',s:3,r:'8-12',w:0},{n:'Bent Over Rows',s:3,r:'10-12',w:1},{n:'Standing OH Press',s:3,r:'8-10',w:1},{n:'Plank',s:3,r:'30-45s',w:0}]},2:{n:'Rest/Cardio',r:1},3:{n:'Full Body B',ex:[{n:'Romanian Deadlifts',s:3,r:'10-12',w:1},{n:'Incline DB Press',s:3,r:'8-12',w:1},{n:'Single Arm Rows',s:3,r:'10-12',w:1},{n:'Lateral Raises',s:3,r:'12-15',w:1},{n:'Glute Bridges',s:3,r:'12-15',w:1}]},4:{n:'Rest/Cardio',r:1},5:{n:'Full Body C',ex:[{n:'Bulgarian Split Squats',s:3,r:'10-12',w:1},{n:'Floor Press',s:3,r:'8-12',w:1},{n:'Pull-Ups',s:3,r:'AMRAP',w:0,a:1},{n:'Hammer Curls',s:3,r:'10-12',w:1},{n:'Calf Raises',s:3,r:'15-20',w:1}]},6:{n:'Rest/Cardio',r:1},7:{n:'Active Recovery',r:1}}},
  upper_lower:{n:'Upper/Lower 4-Day Split',w:12,de:4,dp:65,days:{1:{n:'Upper Push',ex:[{n:'Incline DB Press',s:4,r:'8-10',w:1},{n:'Standing OH Press',s:3,r:'8-10',w:1},{n:'Dips',s:3,r:'6-10',w:0},{n:'Lateral Raises',s:3,r:'12-15',w:1},{n:'OH Tricep Ext',s:3,r:'10-12',w:1},{n:'Face Pulls',s:2,r:'15-20',w:0}]},2:{n:'Lower Quad Focus',ex:[{n:'Goblet Squats',s:4,r:'8-12',w:1},{n:'Bulgarian Split Squats',s:3,r:'10-12',w:1},{n:'Romanian Deadlifts',s:4,r:'8-10',w:1},{n:'Glute Bridges',s:3,r:'12-15',w:1},{n:'Calf Raises',s:3,r:'15-20',w:1}]},3:{n:'Rest/Cardio',r:1},4:{n:'Upper Pull',ex:[{n:'Pull-Ups',s:4,r:'AMRAP',w:0,a:1},{n:'Bent Over Rows',s:4,r:'8-10',w:1},{n:'Single Arm Rows',s:3,r:'10-12',w:1},{n:'Reverse Flys',s:3,r:'12-15',w:1},{n:'Hammer Curls',s:3,r:'10-12',w:1},{n:'Face Pulls',s:2,r:'15-20',w:0}]},5:{n:'Lower Hamstring Focus',ex:[{n:'Romanian Deadlifts',s:4,r:'8-10',w:1},{n:'Walking Lunges',s:3,r:'12-15',w:1},{n:'Single Leg RDL',s:3,r:'10-12',w:1},{n:'Glute Bridges',s:3,r:'12-15',w:1},{n:'Calf Raises',s:3,r:'15-20',w:1}]},6:{n:'Rest',r:1},7:{n:'Active Recovery',r:1}}},
  push_pull_legs:{n:'Push/Pull/Legs 6-Day',w:12,de:4,dp:65,days:{1:{n:'Push',ex:[{n:'Incline DB Press',s:4,r:'8-12',w:1},{n:'Standing OH Press',s:4,r:'8-10',w:1},{n:'Lateral Raises',s:3,r:'12-15',w:1},{n:'OH Tricep Ext',s:3,r:'10-12',w:1},{n:'Face Pulls',s:3,r:'15-20',w:0}]},2:{n:'Pull',ex:[{n:'Pull-Ups',s:4,r:'AMRAP',w:0,a:1},{n:'Bent Over Rows',s:4,r:'8-12',w:1},{n:'Single Arm Rows',s:3,r:'10-12',w:1},{n:'Hammer Curls',s:3,r:'10-12',w:1},{n:'Reverse Flys',s:3,r:'12-15',w:1}]},3:{n:'Legs',ex:[{n:'Goblet Squats',s:4,r:'8-12',w:1},{n:'Romanian Deadlifts',s:4,r:'8-10',w:1},{n:'Bulgarian Split Squats',s:3,r:'10-12',w:1},{n:'Glute Bridges',s:3,r:'12-15',w:1},{n:'Calf Raises',s:3,r:'15-20',w:1}]},4:{n:'Push',ex:[{n:'Flat DB Press',s:4,r:'8-12',w:1},{n:'Arnold Press',s:3,r:'8-10',w:1},{n:'Lateral Raises',s:3,r:'12-15',w:1},{n:'Tricep Kickbacks',s:3,r:'10-12',w:1},{n:'Push-Ups',s:3,r:'AMRAP',w:0,a:1}]},5:{n:'Pull',ex:[{n:'Chin-Ups',s:4,r:'AMRAP',w:0,a:1},{n:'DB Pullovers',s:3,r:'10-12',w:1},{n:'Single Arm Rows',s:4,r:'10-12',w:1},{n:'Bicep Curls',s:3,r:'10-12',w:1},{n:'Shrugs',s:3,r:'12-15',w:1}]},6:{n:'Legs',ex:[{n:'Sumo Squats',s:4,r:'8-12',w:1},{n:'Walking Lunges',s:3,r:'12-15',w:1},{n:'Single Leg RDL',s:3,r:'10-12',w:1},{n:'Hip Thrusts',s:3,r:'12-15',w:1},{n:'Jump Squats',s:3,r:'10-15',w:0}]},7:{n:'Active Recovery',r:1}}},
  minimalist:{n:'Minimalist 3-Day (40s Focused)',w:12,de:4,dp:70,days:{1:{n:'Push + Legs',ex:[{n:'Goblet Squats',s:4,r:'8-10',w:1},{n:'Incline DB Press',s:4,r:'8-10',w:1},{n:'Standing OH Press',s:3,r:'8-10',w:1},{n:'Lateral Raises',s:3,r:'12-15',w:1},{n:'Calf Raises',s:3,r:'15-20',w:1}]},2:{n:'Rest/Cardio',r:1},3:{n:'Pull + Legs',ex:[{n:'Romanian Deadlifts',s:4,r:'8-10',w:1},{n:'Pull-Ups',s:4,r:'AMRAP',w:0,a:1},{n:'Bent Over Rows',s:4,r:'8-10',w:1},{n:'Hammer Curls',s:3,r:'10-12',w:1},{n:'Glute Bridges',s:3,r:'12-15',w:1}]},4:{n:'Rest/Cardio',r:1},5:{n:'Full Body',ex:[{n:'Bulgarian Split Squats',s:3,r:'10-12',w:1},{n:'Push-Ups',s:3,r:'AMRAP',w:0,a:1},{n:'Single Arm Rows',s:3,r:'10-12',w:1},{n:'Reverse Flys',s:3,r:'12-15',w:1},{n:'Plank',s:3,r:'45-60s',w:0}]},6:{n:'Rest/Cardio',r:1},7:{n:'Active Recovery',r:1}}},
  strength_focused:{n:'Strength Focus (Low Rep)',w:12,de:4,dp:60,days:{1:{n:'Upper Push',ex:[{n:'Flat DB Press',s:5,r:'5-6',w:1},{n:'Standing OH Press',s:4,r:'5-6',w:1},{n:'Incline DB Press',s:3,r:'6-8',w:1},{n:'Dips',s:3,r:'5-8',w:0},{n:'OH Tricep Ext',s:3,r:'8-10',w:1}]},2:{n:'Lower Body',ex:[{n:'Goblet Squats',s:5,r:'5-6',w:1},{n:'Romanian Deadlifts',s:5,r:'5-6',w:1},{n:'Bulgarian Split Squats',s:3,r:'6-8',w:1},{n:'Glute Bridges',s:3,r:'10-12',w:1}]},3:{n:'Rest',r:1},4:{n:'Upper Pull',ex:[{n:'Pull-Ups',s:5,r:'AMRAP',w:0,a:1},{n:'Bent Over Rows',s:5,r:'5-6',w:1},{n:'Single Arm Rows',s:3,r:'6-8',w:1},{n:'Hammer Curls',s:3,r:'8-10',w:1}]},5:{n:'Rest',r:1},6:{n:'Full Body Light',ex:[{n:'Goblet Squats',s:3,r:'10-12',w:1},{n:'Push-Ups',s:3,r:'10-15',w:0},{n:'Single Arm Rows',s:3,r:'10-12',w:1},{n:'Face Pulls',s:3,r:'15-20',w:0}]},7:{n:'Active Recovery',r:1}}},
  hypertrophy:{n:'Hypertrophy (Muscle Growth)',w:12,de:4,dp:65,days:{1:{n:'Chest + Triceps',ex:[{n:'Incline DB Press',s:4,r:'8-12',w:1},{n:'Flat DB Press',s:4,r:'8-12',w:1},{n:'DB Fly',s:3,r:'12-15',w:1},{n:'OH Tricep Ext',s:3,r:'10-12',w:1},{n:'Tricep Kickbacks',s:3,r:'12-15',w:1}]},2:{n:'Back + Biceps',ex:[{n:'Bent Over Rows',s:4,r:'8-12',w:1},{n:'Single Arm Rows',s:4,r:'10-12',w:1},{n:'DB Pullovers',s:3,r:'10-12',w:1},{n:'Bicep Curls',s:4,r:'10-12',w:1},{n:'Hammer Curls',s:3,r:'10-12',w:1}]},3:{n:'Legs',ex:[{n:'Goblet Squats',s:4,r:'10-12',w:1},{n:'Romanian Deadlifts',s:4,r:'10-12',w:1},{n:'Bulgarian Split Squats',s:3,r:'12-15',w:1},{n:'Walking Lunges',s:3,r:'12-15',w:1},{n:'Calf Raises',s:4,r:'15-20',w:1}]},4:{n:'Shoulders',ex:[{n:'Standing OH Press',s:4,r:'8-10',w:1},{n:'Arnold Press',s:3,r:'8-10',w:1},{n:'Lateral Raises',s:4,r:'12-15',w:1},{n:'Front Raises',s:3,r:'12-15',w:1},{n:'Reverse Flys',s:3,r:'15-20',w:1}]},5:{n:'Arms + Core',ex:[{n:'Bicep Curls',s:4,r:'10-12',w:1},{n:'Hammer Curls',s:3,r:'10-12',w:1},{n:'OH Tricep Ext',s:4,r:'10-12',w:1},{n:'Dips',s:3,r:'8-12',w:0},{n:'Plank',s:3,r:'45-60s',w:0}]},6:{n:'Rest/Cardio',r:1},7:{n:'Active Recovery',r:1}}}
};
function showTemplates(){modal.innerHTML=`<div class="modal" onclick="if(event.target===this)modal.innerHTML=''"><div class="modal-content"><h3>Load Template Program</h3><p class="muted" style="margin-bottom:16px">Choose a pre-built program. You can customize it after loading.</p>${Object.keys(TEMPS).map(k=>{const t=TEMPS[k];return`<div style="border:2px solid var(--border);border-radius:8px;padding:12px;margin-bottom:12px;cursor:pointer;transition:all .15s" onmouseover="this.style.borderColor='var(--accent)'" onmouseout="this.style.borderColor='var(--border)'" onclick="loadTemp('${k}')"><strong style="font-size:1.1rem">${t.n}</strong><div class="muted" style="margin-top:4px">${t.w} weeks ‚Ä¢ ${Object.keys(t.days).length} days ‚Ä¢ Deload every ${t.de} weeks (${t.dp}%)</div></div>`}).join('')}<button class="btn btn-secondary" style="width:100%;margin-top:8px" onclick="modal.innerHTML=''">Cancel</button></div></div>`;modal.style.display='block'}
function loadTemp(k){if(confirm('Load this template? Current program will be replaced.')){dt=JSON.parse(JSON.stringify(TEMPS[k]));S.save(dt);expDays.clear();modal.innerHTML='';r()}}
const CAT={push:'Push',pull:'Pull',legs:'Legs',core:'Core',fullbody:'Full Body',cardio:'Cardio'};
const P='wt_v1_';
let dt={},pg={},cw=1,view='setup',wm={on:0,d:0,i:0},expDays=new Set();
const db={};
function deb(k,f,d=300){clearTimeout(db[k]);db[k]=setTimeout(f,d)}
const S={get(){const r=localStorage.getItem(P+'t');return r?JSON.parse(r):{n:'My Program',w:12,de:4,dp:65,days:{}}},save(d){localStorage.setItem(P+'t',JSON.stringify(d))},getP(){const r=localStorage.getItem(P+'p');return r?JSON.parse(r):{}},saveP(d){localStorage.setItem(P+'p',JSON.stringify(d))},getW(){return parseInt(localStorage.getItem(P+'w')||'1',10)},setW(w){localStorage.setItem(P+'w',String(w))},reset(){if(confirm('Reset ALL data?')){for(let i=localStorage.length-1;i>=0;i--){const k=localStorage.key(i);if(k&&k.startsWith(P))localStorage.removeItem(k)}location.reload()}}};
dt=S.get();pg=S.getP();cw=S.getW();
function isDL(w){return dt.de>0&&w%dt.de===0}
function getP(w,d,e,s){return pg[`${w}|${d}|${e}|${s}`]||null}
function setP(w,d,e,s,v){pg[`${w}|${d}|${e}|${s}`]=v;deb('sp',()=>S.saveP(pg))}
function getDC(w,d){const dd=dt.days[d];if(!dd||!dd.ex)return 0;if(dd.r)return getP(w,d,'rest','c')?100:0;let t=0,c=0;dd.ex.forEach((e,i)=>{for(let s=1;s<=e.s;s++){t++;if(getP(w,d,i,s))c++}});return t>0?Math.round(c/t*100):0}
function getWC(w){const ds=Object.keys(dt.days);if(!ds.length)return 0;return Math.round(ds.reduce((a,d)=>a+getDC(w,d),0)/ds.length)}
function apDL(wt){return Math.round(wt*dt.dp/100)}
function r(){const a=document.getElementById('app');if(view==='setup')rS();else rW()}
function rS(){const ds=Object.keys(dt.days).sort((a,b)=>a-b);app.innerHTML=`<div class="card"><h3>Settings</h3><div style="margin-bottom:12px"><button class="btn btn-secondary btn-sm" onclick="showTemplates()">üìã Load Template Program</button></div><label>Name: <input class="input" value="${dt.n}" onchange="dt.n=this.value;S.save(dt)"></label><div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:12px;margin-top:12px"><label class="muted">Total Weeks<input type="number" class="input" min="1" value="${dt.w}" onchange="dt.w=+this.value;S.save(dt);r()"></label><label class="muted">Deload Every<input type="number" class="input" min="0" value="${dt.de}" onchange="dt.de=+this.value;S.save(dt);r()"></label><label class="muted">Deload %<input type="number" class="input" min="40" max="100" value="${dt.dp}" onchange="dt.dp=+this.value;S.save(dt)"></label></div><button class="btn btn-danger btn-sm" style="margin-top:12px" onclick="S.reset()">Reset All</button></div><div class="card"><div class="flex-bet" style="margin-bottom:12px"><h3>Days</h3><button class="btn btn-primary btn-sm" onclick="addD()">+ Day</button></div><div>${ds.length?ds.map(d=>{const dd=dt.days[d];const exp=expDays.has(d);return`<div class="day-setup"><div class="flex-bet" style="margin-bottom:8px;cursor:pointer" onclick="togDay(${d})"><div><strong>Day ${d}: ${dd.n||'Unnamed'}</strong> ${exp?'‚ñº':'‚ñ∂'}</div><div style="display:flex;gap:8px;align-items:center"><label style="font-size:.9rem" onclick="event.stopPropagation()"><input type="checkbox" ${dd.r?'checked':''} onchange="dt.days[${d}].r=this.checked;S.save(dt);r()"> Rest Day</label><button class="btn btn-danger btn-sm" onclick="event.stopPropagation();delD(${d})">Remove</button></div></div>${exp?`<div><input class="input" style="margin-bottom:8px" value="${dd.n||''}" placeholder="Day name" onchange="dt.days[${d}].n=this.value;S.save(dt);r()">${dd.r?'<p class="muted">Rest/Cardio day</p>':`<button class="btn btn-secondary btn-sm" onclick="openLib(${d})">+ Exercise</button><div style="margin-top:8px">${(dd.ex||[]).map((e,i)=>`<div class="ex-card"><div class="flex-bet"><strong>${e.n}</strong><button class="btn btn-danger btn-sm" onclick="delEx(${d},${i})">X</button></div><div style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap"><label class="muted">Sets: <input type="number" min="1" value="${e.s}" style="width:60px;padding:4px" onchange="dt.days[${d}].ex[${i}].s=+this.value;S.save(dt)"></label><label class="muted">Reps: <input value="${e.r}" style="width:80px;padding:4px" onchange="dt.days[${d}].ex[${i}].r=this.value;S.save(dt)"></label><label><input type="checkbox" ${e.w?'checked':''} onchange="dt.days[${d}].ex[${i}].w=this.checked;S.save(dt)"> Weight</label><label><input type="checkbox" ${e.a?'checked':''} onchange="dt.days[${d}].ex[${i}].a=this.checked;S.save(dt)"> AMRAP</label></div></div>`).join('')}</div>`}</div>`:''}</div>`}).join(''):'<p class="muted">No days yet</p>'}</div></div>`}
function rW(){if(wm.on){rAW();return}const ws=[];for(let w=1;w<=dt.w;w++){const c=getWC(w);ws.push(`<button class="week-btn ${w===cw?'active':''} ${c===100?'comp':''} ${isDL(w)?'deload':''}" onclick="cw=${w};r()">W${w}${isDL(w)?' üîÑ':''}<div style="font-size:.75rem">${c}%</div></button>`)}const ds=Object.keys(dt.days).sort((a,b)=>a-b);app.innerHTML=`<div class="card"><div class="flex-bet"><div><h3>Week ${cw}${isDL(cw)?' üîÑ DELOAD':''}</h3><p class="muted">${dt.n}</p></div><div style="text-align:right"><div style="font-weight:600">${getWC(cw)}%</div><div class="prog-bar" style="width:100px"><div class="prog-fill" style="width:${getWC(cw)}%"></div></div></div></div><div class="week-sel" style="margin-top:12px">${ws.join('')}</div></div>${isDL(cw)?`<div class="deload-ind"><strong>üîÑ Deload Week</strong><p class="muted">Weights at ${dt.dp}%</p></div>`:''}${ds.length?`<div class="day-grid">${ds.map(d=>{const dd=dt.days[d];const c=getDC(cw,d);return`<div class="day-card ${c===100?'comp':''} ${dd.r?'rest':''}" onclick="${dd.r?'':'stW('+d+')'}"><div style="font-size:1.1rem;font-weight:700">Day ${d}</div><div class="muted">${dd.n||'Unnamed'}</div>${dd.r?`<label style="margin-top:8px" onclick="event.stopPropagation()"><input type="checkbox" ${getP(cw,d,'rest','c')?'checked':''} onchange="togRC(${d},this.checked)"> Complete</label>`:`<div class="prog-bar" style="margin-top:8px"><div class="prog-fill" style="width:${c}%"></div></div><div style="font-size:.85rem;margin-top:4px">${c}%</div><button class="btn btn-primary btn-sm" style="margin-top:8px;width:100%" onclick="event.stopPropagation();stW(${d})">Start</button>`}</div>`}).join('')}</div>`:'<div class="card muted">No days. Go to Setup.</div>'}`}
function rAW(){const d=wm.d;const dd=dt.days[d];const exs=dd.ex||[];const ce=exs[wm.i];if(!ce){wm.on=0;r();return}const wt=getP(cw,d,wm.i,'weight');const dwt=isDL(cw)&&wt?apDL(wt):wt;const nw=(cw%dt.w)+1;app.innerHTML=`<div style="position:sticky;top:0;background:var(--card);padding:12px;border-radius:8px;margin-bottom:16px;box-shadow:0 2px 8px rgba(0,0,0,.1)"><div class="flex-bet"><button class="btn btn-secondary btn-sm" onclick="exW()">‚Üê Exit</button><div style="text-align:center"><strong>Day ${d}: ${dd.n}</strong><div class="muted">Ex ${wm.i+1}/${exs.length}</div></div><div style="width:60px"></div></div></div>${isDL(cw)?`<div class="deload-ind"><strong>üîÑ ${dt.dp}%</strong></div>`:''}${exs.map((e,i)=>{const act=i===wm.i;const ewt=getP(cw,d,i,'weight');const dewt=isDL(cw)&&ewt?apDL(ewt):ewt;const nwt=getP(nw,d,i,'weight');return`<div class="wo-ex ${act?'active':''}" style="${!act?'opacity:.4':''}"><div style="font-size:1.2rem;font-weight:700">${e.n}</div><div class="muted">${e.r} reps √ó ${e.s} sets${e.a?' (AMRAP)':''}</div>${e.w?`<div>${act&&!ewt?`<div style="background:#fef3c7;padding:12px;border-radius:8px;margin-top:8px"><strong>Set Weight</strong><div style="display:flex;gap:8px;margin-top:8px"><input type="number" class="input" id="wtIn${i}" placeholder="lbs" style="width:100px"><button class="btn btn-primary btn-sm" onclick="setWt(${i},document.getElementById('wtIn${i}').value)">Set</button></div></div>`:`<div class="wt-disp">${dewt} lbs${isDL(cw)&&ewt?' ('+ewt+' normal)':''}</div>`}</div>`:''}${act?`<div class="set-grid">${Array.from({length:e.s},(_,s)=>{const st=getP(cw,d,i,s+1);return`<button class="set-btn ${st==='p'?'pass':st==='f'?'fail':''}" onclick="togSet(${i},${s+1})">${e.a?'‚úì':'<span style="display:flex;width:100%"><span style="flex:1;border-right:1px solid var(--border);padding:8px">‚úì</span><span style="flex:1;padding:8px">‚úó</span></span>'}</button>${e.a?`<input type="number" class="amrap-in" value="${getP(cw,d,i+100+s,0)||''}" onchange="setP(cw,${d},${i+100+s},0,+this.value)">`:''}`}).join('')}</div>`:''}${e.a&&act?`<div style="margin-top:8px;font-weight:600">Total: ${Array.from({length:e.s},(_,s)=>getP(cw,d,i+100+s,0)||0).reduce((a,b)=>a+b,0)}</div>`:''}${e.w&&act&&ewt?`<div style="margin-top:12px;padding:12px;background:#f9fafb;border-radius:8px"><div style="font-weight:700;margin-bottom:8px">Next Week Adjustment</div><div class="muted" style="font-size:.85rem;margin-bottom:8px">Planned: ${nwt?nwt+' lbs':'none'}</div><div style="display:flex;gap:6px;flex-wrap:wrap;align-items:center">${[-10,-5,-3,-2,0,2,3,5,10].map(dlt=>`<button class="btn btn-sm ${nwt&&Math.round(nwt)===Math.round(ewt+dlt)?'btn-primary':'btn-secondary'}" onclick="setP(${nw},${d},${i},'weight',${ewt+dlt});r()">${dlt>0?'+'+dlt:dlt}</button>`).join('')}<input type="number" class="input" placeholder="Custom" id="custWt${i}" value="${nwt&&![-10,-5,-3,-2,0,2,3,5,10].some(dlt=>Math.round(ewt+dlt)===Math.round(nwt))?nwt:''}" style="width:80px;padding:6px 8px" onchange="setP(${nw},${d},${i},'weight',+this.value);r()"><button class="btn btn-danger btn-sm" onclick="setP(${nw},${d},${i},'weight',null);r()">Clear</button></div></div>`:''}</div>`}).join('')}<div style="display:flex;gap:8px;margin-top:16px"><button class="btn btn-secondary" ${wm.i===0?'disabled':''} onclick="wm.i--;r()">‚Üê Prev</button><button class="btn btn-secondary" style="flex:1" onclick="exW()">All Ex</button><button class="btn btn-secondary" ${wm.i>=exs.length-1?'disabled':''} onclick="wm.i++;r()">Next ‚Üí</button></div>`}
function switchView(v){view=v;document.querySelectorAll('.nav-btn').forEach(b=>b.classList.toggle('active',b.textContent.includes(v==='setup'?'Setup':'Workout')));r()}
function addD(){const nk=Math.max(0,...Object.keys(dt.days).map(Number))+1;dt.days[nk]={n:'',ex:[],r:0};expDays.clear();expDays.add(nk);S.save(dt);r()}
function delD(d){delete dt.days[d];expDays.delete(d);S.save(dt);r()}
function togDay(d){if(expDays.has(d))expDays.delete(d);else expDays.add(d);r()}
function openLib(d){modal.innerHTML=`<div class="modal" onclick="if(event.target===this)closeLib()"><div class="modal-content"><h3>Add Exercise</h3><input class="input" placeholder="Search..." onkeyup="filterLib(this.value)" style="margin:12px 0"><div class="ex-lib">${Object.keys(EX).map(c=>`<div style="grid-column:1/-1;font-weight:700;margin-top:12px">${CAT[c]}</div>${EX[c].map(e=>`<div class="ex-item" onclick="addEx(${d},'${e.replace(/'/g,"\\'")}');closeLib()">${e}</div>`).join('')}`).join('')}</div><button class="btn btn-secondary" style="margin-top:12px" onclick="closeLib()">Cancel</button></div></div>`;modal.style.display='block'}
function closeLib(){modal.innerHTML=''}
function filterLib(q){document.querySelectorAll('.ex-item').forEach(e=>e.style.display=e.textContent.toLowerCase().includes(q.toLowerCase())?'':'none')}
function addEx(d,n){if(!dt.days[d].ex)dt.days[d].ex=[];dt.days[d].ex.push({n:n,s:3,r:'8-12',w:1,a:0});S.save(dt);r()}
function delEx(d,i){dt.days[d].ex.splice(i,1);S.save(dt);r()}
function stW(d){wm={on:1,d:d,i:0};r()}
function exW(){wm.on=0;r()}
function togSet(i,s){const st=getP(cw,wm.d,i,s);const ne=dt.days[wm.d].ex[i].a;if(ne){setP(cw,wm.d,i,s,st==='p'?null:'p')}else{const cl=event.clientX-event.target.getBoundingClientRect().left;const half=cl<event.target.offsetWidth/2;if(st==='p'&&half)setP(cw,wm.d,i,s,null);else if(st==='f'&&!half)setP(cw,wm.d,i,s,null);else setP(cw,wm.d,i,s,half?'p':'f')}r()}
function setWt(i,v){if(+v>0){setP(cw,wm.d,i,'weight',+v);r()}}
function togRC(d,c){setP(cw,d,'rest','c',c?1:null);r()}
if('wakeLock'in navigator)document.addEventListener('click',async()=>{try{await navigator.wakeLock.request('screen')}catch(e){}},{once:1});
r();
</script>
</body>
</html>
