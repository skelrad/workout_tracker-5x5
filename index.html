<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Progressive 5x5 — Manual-only Progression</title>
<style>
:root{
  --accent:#3b82f6;
  --muted:#6b7280;
  --success:#10b981;
  --danger:#ef4444;
  --complete-day:#34d399;
  --split-left: rgba(16,185,129,0.14);
  --split-right: rgba(239,68,68,0.12);
}
*{box-sizing:border-box}
body{font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;background:#f5f5f5;margin:0;padding:20px;color:#111}
.container{max-width:1100px;margin:0 auto}
.card{background:#fff;padding:18px;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,.06);margin-bottom:18px}
h1{font-size:1.4rem;margin:0 0 6px}
p.lead{margin:0;color:var(--muted)}
.controls{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
.week-selector{display:flex;gap:8px;flex-wrap:wrap}
.week-btn{padding:8px 12px;border-radius:8px;border:2px solid #ddd;background:#fff;font-weight:600;cursor:pointer}
.week-btn:hover{background:#f3f4f6}
.week-btn.active{background:var(--accent);color:#fff;border-color:var(--accent)}
.week-btn.deload{background:#fef3c7;border-color:#fbbf24}
.week-btn.deload.active{background:#fbbf24;color:#78350f}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px}
.day-card{padding:14px;border-radius:8px;border:2px solid transparent;cursor:pointer;transition: background 0.2s, border-color 0.2s;}
.day-card:hover{transform:translateY(-2px);transition:transform .12s}
.day-card.selected{border-color:var(--accent);background:#eff6ff}
.day-card.complete{background:#a7f3d0;border-color:var(--complete-day);}
.day-card > div:first-child{font-weight:700;border-bottom:1px solid #d1d5db;padding-bottom:6px;margin-bottom:8px;}
.day-card > div:last-child{
  max-height:0;
  overflow:hidden;
  transition: max-height 0.35s ease;
}
.day-card.expanded > div:last-child{
  max-height:2000px;
}
.exercise-card{padding:14px;border-radius:8px;border:1px solid #e6e6e6;margin-bottom:10px;background:#fdfdfd;box-shadow:0 1px 4px rgba(0,0,0,0.05);transition: transform 0.08s;}
.exercise-card:hover{transform:translateY(-2px);}
.set-buttons{display:flex;gap:8px;flex-wrap:wrap}
.set-btn{position:relative;padding:6px 10px;border-radius:8px;border:1px solid #d1d5db;background:#fff;cursor:pointer;min-width:68px;user-select:none;display:inline-flex;align-items:center;justify-content:center;overflow:hidden;transition: transform 0.08s;}
.set-btn:hover{transform:scale(1.05);}
.set-btn .half{display:inline-block;width:50%;text-align:center;padding:6px 8px;pointer-events:none}
.set-btn .half.left{background:var(--split-left)}
.set-btn .half.right{background:var(--split-right)}
.set-btn.pass{background:var(--success);border-color:var(--success);color:#fff}
.set-btn.fail{background:var(--danger);border-color:var(--danger);color:#fff}
.adjust-btn{padding:6px 8px;border-radius:6px;border:1px solid #d1d5db;background:#fff;cursor:pointer}
.adjust-btn.active{background:var(--accent);color:#fff;border-color:var(--accent)}
.adjust-clear{padding:6px 8px;border-radius:6px;border:1px solid #ef4444;background:#fff;color:#ef4444;cursor:pointer}
.hidden{display:none}
.muted{color:var(--muted);font-size:.95rem}
.flex{display:flex;gap:12px;align-items:center}
.spacer{flex:1}
.small{font-size:.9rem}
.alert{padding:12px;border-radius:8px;background:#dbeafe;border-left:4px solid var(--accent);margin-bottom:14px}
footer{margin-top:18px;text-align:center;color:var(--muted);font-size:0.9rem}
@media print{.controls,button{display:none}}
@media (max-width:500px){
  .grid{grid-template-columns:1fr;}
  .exercise-card{padding:12px;}
  .controls{flex-direction:column;gap:8px;}
  .week-btn{padding:6px 10px;font-size:0.9rem;}
  .adjust-btn,.adjust-clear,.set-btn{padding:4px 6px;font-size:0.85rem;}
}
</style>
</head>
<body>
<div class="container">
  <div class="card">
    <h1>Progressive 5x5 — Manual-only Progression</h1>
    <p class="lead">All progressions are manual. Use the "Change for Next Week" controls under each exercise.</p>
    <div id="cycleInfo" class="muted small" style="margin-top:10px"></div>
  </div>

  <div class="card controls" aria-label="controls">
    <div>
      <strong>Select Week</strong>
      <div id="weekSelector" class="week-selector" aria-label="week selector"></div>
    </div>
    <div class="spacer"></div>
    <div style="min-width:240px;text-align:right">
      <button id="resetBtn" class="week-btn" title="Reset progress">Reset</button>
    </div>
  </div>

  <div id="round2Container"></div>
  <div id="workoutGrid" class="grid"></div>
  <footer class="muted">LocalStorage — data saved per browser.</footer>
</div>

<script>
(function(){
  'use strict';
  const PROGRAM = {
    1:{name:"Upper Body Push",exercises:[
      {name:"Incline Dumbbell Press",sets:5,startWeight:25,notes:"Focus on upper chest"},
      {name:"Standing Overhead Press",sets:5,startWeight:20,notes:"Strict form"},
      {name:"Dumbbell Floor Press",sets:5,startWeight:30,notes:"Protect shoulders"},
      {name:"Lateral Raises",sets:3,startWeight:10,notes:"Slight bend in elbow"},
      {name:"Overhead Tricep Extension",sets:3,startWeight:20,notes:"Single DB, both arms"}
    ]},
    2:{name:"Lower Body",exercises:[
      {name:"Goblet Squats",sets:5,startWeight:40,notes:"Hold one DB at chest"},
      {name:"Romanian Deadlifts",sets:5,startWeight:30,notes:"Hinge at hips"},
      {name:"Bulgarian Split Squats",sets:4,startWeight:20,notes:"Each leg"},
      {name:"Dumbbell Lunges",sets:3,startWeight:20,notes:"Each leg, walking"},
      {name:"Calf Raises",sets:3,startWeight:30,notes:"On step, hold DBs"}
    ]},
    3:{name:"Cardio & Core",exercises:[
      {name:"Treadmill Intervals",sets:1,startWeight:0,notes:"Interval session — no adjustments"},
      {name:"Plank",sets:5,startTime:30,notes:"Hold:"},
      {name:"Russian Twists",sets:5,startPerSide:10,notes:"10/side"},
      {name:"Dumbbell Side Bends",sets:3,startWeight:25,notes:"10 Each Side"},
      {name:"Lying Leg Raises",sets:5,startReps:10,notes:""}
    ]},
    4:{name:"Upper Body Pull",exercises:[
      {name:"Bent Over Rows",sets:5,startWeight:35,notes:"Pull to hip"},
      {name:"Single Arm Row",sets:4,startWeight:40,notes:"Each arm"},
      {name:"Dumbbell Pullover",sets:4,startWeight:30,notes:"Chest/back combo"},
      {name:"Hammer Curls",sets:4,startWeight:20,notes:"Neutral grip"},
      {name:"Reverse Flyes",sets:3,startWeight:12,notes:"Rear delts"}
    ]},
    5:{name:"Full Body & Cardio",exercises:[
      {name:"Dumbbell Clean & Press",sets:4,startWeight:25,notes:"Explosive"},
      {name:"Goblet Squats",sets:4,startWeight:40,notes:"Similar to Day 2"},
      {name:"Push-ups",sets:5,startReps:15,notes:""},
      {name:"Dumbbell Swings",sets:3,startWeight:30,notes:"Hip drive"},
      {name:"Treadmill Intervals",sets:1,startWeight:0,notes:"Interval session — no adjustments"}
    ]}
  };

  const PREFIX='prog_manual_v7_';
  function key(...parts){return PREFIX+parts.join('|');}
  const DS={
    getWeek(){return parseInt(localStorage.getItem(key('week'))||'1',10);},
    setWeek(w){localStorage.setItem(key('week'),String(w));},
    saveProgress(w,d,e,s,v){localStorage.setItem(key('p',w,d,e,'s'+s),String(v));},
    getProgress(w,d,e,s){return localStorage.getItem(key('p',w,d,e,'s'+s))||null;},
    removeProgress(w,d,e,s){localStorage.removeItem(key('p',w,d,e,'s'+s));},
    saveValue(w,d,e,v){localStorage.setItem(key('v',w,d,e),String(v));},
    getValue(w,d,e){const v=localStorage.getItem(key('v',w,d,e));return v!==null?Number(v):null;},
    removeValue(w,d,e){localStorage.removeItem(key('v',w,d,e));},
    resetAll(){for(let i=0;i<localStorage.length;i++){const k=localStorage.key(i);if(k&&k.startsWith(PREFIX))localStorage.removeItem(k);}}
  };

  const dom={
    cycleInfo:document.getElementById('cycleInfo'),
    weekSelector:document.getElementById('weekSelector'),
    grid:document.getElementById('workoutGrid'),
    resetBtn:document.getElementById('resetBtn'),
    round2Container:document.getElementById('round2Container')
  };

  function clear(el){while(el.firstChild)el.removeChild(el.firstChild);}
  function getDisplayedValue(w,d,eIdx,ex){const v=DS.getValue(w,d,eIdx);if(v!==null)return v;if(ex.hasOwnProperty('startWeight'))return ex.startWeight;if(ex.hasOwnProperty('startTime'))return ex.startTime;if(ex.hasOwnProperty('startPerSide'))return ex.startPerSide;if(ex.hasOwnProperty('startReps'))return ex.startReps;return 0;}
  function allSetsComplete(w,d){const exs=PROGRAM[d].exercises;for(let i=0;i<exs.length;i++){for(let s=1;s<=exs[i].sets;s++){if(!DS.getProgress(w,d,i+1,s))return false;}}return true;}
  function allWeeksComplete(){for(let w=1;w<=12;w++){for(let d in PROGRAM){if(!allSetsComplete(w,d))return false;}}return true;}

  function renderWeekSelector(currentWeek){clear(dom.weekSelector);for(let w=1;w<=12;w++){const btn=document.createElement('button');btn.type='button';btn.className='week-btn';btn.textContent='Week '+w;if(w===currentWeek)btn.classList.add('active');if(w%4===0)btn.classList.add('deload');btn.addEventListener('click',()=>{DS.setWeek(w);renderDaysGrid();});dom.weekSelector.appendChild(btn);}}

  function renderDaysGrid(){
    const week=DS.getWeek();
    dom.cycleInfo.textContent='Week '+week;
    clear(dom.grid);
    dom.round2Container.innerHTML='';
    const days=Object.keys(PROGRAM).map(k=>parseInt(k,10)).sort((a,b)=>a-b);
    days.forEach(day=>{
      const def=PROGRAM[day];
      const card=document.createElement('div');card.className='card day-card';if(allSetsComplete(week,day))card.classList.add('complete');
      card.tabIndex=0;
      card.innerHTML=`<div style="display:flex;justify-content:space-between;align-items:center"><strong>Day ${day}</strong><span class="muted small">${def.name}</span></div>`;
      const container=document.createElement('div');container.id='dayExercises_'+day;card.appendChild(container);
      card.addEventListener('click',()=>{card.classList.toggle('expanded');});
      dom.grid.appendChild(card);
      renderExercises(week,day);
    });

    if(allWeeksComplete()){
      const btnCard=document.createElement('div');btnCard.className='card';
      const btn=document.createElement('button');btn.className='week-btn';btn.textContent='All 12 weeks completed. Reset for Round 2?';
      btn.addEventListener('click',()=>{
        if(confirm('Reset all progress for Round 2? We will keep last weights.')){
          // Preserve last weights
          for(let w=1;w<=12;w++){for(let d in PROGRAM){PROGRAM[d].exercises.forEach((ex,idx)=>{
            const exIdx=idx+1;const nextVal=DS.getValue(w,d,exIdx);
            if(nextVal!==null)DS.saveValue(1,d,exIdx,nextVal); // set week1 start
          });}}
          DS.resetAll();renderDaysGrid();
        }
      });
      btnCard.appendChild(btn);
      dom.round2Container.appendChild(btnCard);
    }
  }

  function renderExercises(week,day){
    const container=document.getElementById('dayExercises_'+day);
    clear(container);
    PROGRAM[day].exercises.forEach((ex,idx)=>{
      const exIdx=idx+1;const exCard=document.createElement('div');exCard.className='exercise-card';const displayed=getDisplayedValue(week,day,exIdx,ex);
      let subtitleHTML='';
      if(ex.hasOwnProperty('startTime')){subtitleHTML=`<div class="muted small">Hold: ${displayed} s</div>`;}
      else if(ex.hasOwnProperty('startPerSide')){subtitleHTML=`<div class="muted small">${ex.notes||''} — ${displayed}/side</div>`;}
      else if(ex.hasOwnProperty('startReps') && !(day===5 && ex.name.toLowerCase().includes('push-ups'))){subtitleHTML=`<div class="muted small">${displayed} reps per set</div>`;}
      else{subtitleHTML=`<div class="muted small">${ex.notes||''}</div>`;}
      exCard.innerHTML=`<div style="display:flex;justify-content:space-between;align-items:flex-start"><div><div style="font-weight:700">${ex.name}</div>${subtitleHTML}</div><div style="text-align:right"><div style="font-weight:700">${(ex.hasOwnProperty('startTime')?displayed+' s':(ex.hasOwnProperty('startPerSide')?displayed+'/side':(ex.hasOwnProperty('startReps')?displayed+' reps':displayed+' lbs')))}</div></div></div><div style="margin-top:10px" id="ex_${day}_${exIdx}"></div>`;
      container.appendChild(exCard);
      const placeholder=exCard.querySelector(`#ex_${day}_${exIdx}`);
      const setRow=document.createElement('div');setRow.className='set-buttons';
      for(let s=1;s<=ex.sets;s++){
        const btn=document.createElement('button');btn.type='button';btn.className='set-btn';
        const left=document.createElement('span');left.className='half left';left.textContent='✓';
        const right=document.createElement('span');right.className='half right';right.textContent='✗';
        btn.appendChild(left);btn.appendChild(right);
        const state=DS.getProgress(week,day,exIdx,s);
        if(state==='complete')btn.classList.add('pass');else if(state==='failed')btn.classList.add('fail');
        btn.addEventListener('click',(ev)=>{const rect=btn.getBoundingClientRect();const clickX=ev.clientX-rect.left;if(ev.detail===2){DS.removeProgress(week,day,exIdx,s);renderDaysGrid();return;}const half=rect.width/2;if(clickX<half){DS.saveProgress(week,day,exIdx,s,'complete');btn.classList.remove('fail');btn.classList.add('pass');}else{DS.saveProgress(week,day,exIdx,s,'failed');btn.classList.remove('pass');btn.classList.add('fail');}renderDaysGrid();});setRow.appendChild(btn);}
      placeholder.appendChild(setRow);

      if(ex.hasOwnProperty('startWeight')){
        const nextWeek=(week%12)+1;
        const wrap=document.createElement('div');wrap.style.marginTop='10px';wrap.innerHTML=`<div style="font-weight:700;margin-bottom:6px">Weight change for next week</div>`;
        const planned=DS.getValue(nextWeek,day,exIdx);
        const plannedText=document.createElement('div');plannedText.className='muted small';plannedText.style.marginBottom='6px';
        plannedText.textContent='Planned next-week weight: '+(planned!==null?planned+' lbs':'none');wrap.appendChild(plannedText);
        const deltas=[-3,-2,0,2,3]; // ±2 included inline
        const row=document.createElement('div');row.style.display='flex';row.style.gap='8px';row.style.flexWrap='wrap';
        deltas.forEach(delta=>{const btn=document.createElement('button');btn.type='button';btn.className='adjust-btn';btn.textContent=(delta>0?'+'+delta:String(delta));if(planned!==null && Math.abs(planned-(displayed+delta))<0.0005)btn.classList.add('active');btn.addEventListener('click',()=>{const nextVal=displayed+delta;DS.saveValue(nextWeek,day,exIdx,nextVal);renderDaysGrid();});row.appendChild(btn);});
        const clr=document.createElement('button');clr.type='button';clr.className='adjust-clear';clr.textContent='Clear';clr.addEventListener('click',()=>{DS.removeValue(nextWeek,day,exIdx);renderDaysGrid();});row.appendChild(clr);wrap.appendChild(row);placeholder.appendChild(wrap);
      }

      if(ex.hasOwnProperty('startTime') || ex.hasOwnProperty('startPerSide') || ex.hasOwnProperty('startReps')){
        const nextWeek=(week%12)+1;
        const wrap=document.createElement('div');wrap.style.marginTop='10px';
        let title='';let deltas=[];
        if(ex.hasOwnProperty('startTime')){title='Change for Next Week (seconds)';deltas=[-30,-20,-10,0,10,20,30];}
        else if(ex.hasOwnProperty('startPerSide')){title='Change for Next Week (reps per side)';deltas=[-10,-5,-3,0,3,5,10];}
        else if(ex.hasOwnProperty('startReps')){title='Change for Next Week (reps per set)';deltas=[-10,-5,-3,0,3,5,10];}
        wrap.innerHTML=`<div style="font-weight:700;margin-bottom:6px">${title}</div>`;
        const planned=DS.getValue(nextWeek,day,exIdx);
        const plannedText=document.createElement('div');plannedText.className='muted small';plannedText.style.marginBottom='6px';
        plannedText.textContent='Planned next-week: '+(planned!==null?(ex.hasOwnProperty('startTime')?planned+' s':ex.hasOwnProperty('startPerSide')?planned+' /side':planned+' reps'):'none');
        wrap.appendChild(plannedText);
        const row=document.createElement('div');row.style.display='flex';row.style.gap='8px';row.style.flexWrap='wrap';
        deltas.forEach(delta=>{const btn=document.createElement('button');btn.type='button';btn.className='adjust-btn';btn.textContent=(delta>0?'+'+delta:String(delta));if(planned!==null && Math.round(planned)===Math.round(displayed+delta))btn.classList.add('active');btn.addEventListener('click',()=>{DS.saveValue(nextWeek,day,exIdx,Math.round(displayed+delta));renderDaysGrid();});row.appendChild(btn);});
        const clr=document.createElement('button');clr.type='button';clr.className='adjust-clear';clr.textContent='Clear';clr.addEventListener('click',()=>{DS.removeValue(nextWeek,day,exIdx);renderDaysGrid();});row.appendChild(clr);
        wrap.appendChild(row);placeholder.appendChild(wrap);
      }

    });
  }

  dom.resetBtn.addEventListener('click',()=>{if(confirm('Reset all saved program data? This cannot be undone.')){DS.resetAll();renderDaysGrid();}});
  if(!localStorage.getItem(key('week')))DS.setWeek(1);
  renderWeekSelector(DS.getWeek());
  renderDaysGrid();

})();
</script>
</body>
</html>
