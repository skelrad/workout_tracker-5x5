<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>12-Week Program</title>

<style>
body {
  font-family: Arial, sans-serif;
  padding: 15px;
  background: #f7f7f7;
  margin: 0;
}

h2 {
  margin-top: 30px;
}

.day {
  background: white;
  border-radius: 10px;
  margin-bottom: 15px;
  padding: 15px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.day-header {
  font-size: 20px;
  font-weight: bold;
  cursor: pointer;
  padding-bottom: 10px;
}

.exercise {
  margin-bottom: 20px;
  padding: 10px 0;
  border-bottom: 1px solid #ddd;
}

.exercise:last-child {
  border-bottom: none;
}

.set-row {
  display: flex;
  gap: 10px;
  margin-top: 5px;
}

.set-btn {
  width: 42px;
  height: 42px;
  font-size: 18px;
  border-radius: 8px;
  background: #eee;
  border: 1px solid #ccc;
}

.set-btn.completed {
  background: #4caf50;
  color: white;
}

.adjust-btn, .adjust-clear {
  padding: 7px 14px;
  border-radius: 7px;
  border: 1px solid #ccc;
  font-size: 16px;
  background: #eee;
}

.adjust-btn.active {
  background: #4caf50;
  color: white;
}

.amrap-row {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-top: 8px;
}

.amrap-input {
  font-size: 22px;
  padding: 10px 14px;
  width: 90px;
  border-radius: 12px;
  border: 2px solid #666;
}

.amrap-adjust {
  width: 45px;
  height: 45px;
  font-size: 26px;
  border-radius: 12px;
  background: #ddd;
  border: 1px solid #aaa;
}

.amrap-total {
  margin-top: 6px;
  font-size: 14px;
  color: #444;
}

.muted {
  color: #777;
  font-size: 14px;
}

.weight-label {
  margin-top: 6px;
  font-size: 14px;
}
</style>
</head>
<body>

<h2>Week <span id="weekDisplay"></span></h2>
<select id="weekSelect"></select>

<div id="daysContainer"></div>

<button id="resetBtn" style="margin-top:25px;">Reset All Progress</button>

<script>
/* ===========================
   PROGRAM STRUCTURE
=========================== */

const PROGRAM = [
  {
    name: "Day 1 — Upper A (Strength)",
    exercises: [
      { name: "Dumbbell Bench Press", sets: 4, reps: 8, weight: true },
      { name: "1-Arm Dumbbell Row", sets: 4, reps: 10, weight: true },
      { name: "Dumbbell Shoulder Press", sets: 3, reps: 8, weight: true },
      { name: "Tricep Overhead Extension", sets: 3, reps: 10, weight: true },
      { name: "Bicep Curls", sets: 3, reps: 10, weight: true }
    ]
  },
  {
    name: "Day 2 — Lower + Core",
    exercises: [
      { name: "Goblet Squat", sets: 4, reps: 10, weight: true },
      { name: "Dumbbell RDL", sets: 4, reps: 10, weight: true },
      { name: "Dumbbell Lunges", sets: 3, reps: 8, weight: true },
      { name: "Glute Bridge (Dumbbell)", sets: 3, reps: 12, weight: true }
    ]
  },
  {
    name: "Day 3 — Yoga / Cardio",
    exercises: [
      { name: "Yoga / Cardio Session", sets: 1, reps: 1, isYoga: true }
    ]
  },
  {
    name: "Day 4 — Upper B (Hypertrophy)",
    exercises: [
      { name: "Incline Dumbbell Bench Press", sets: 3, reps: 10, weight: true },
      { name: "Dumbbell Lateral Raises", sets: 3, reps: 12, weight: true },
      { name: "Dumbbell Row (Elbow Out)", sets: 3, reps: 12, weight: true },
      { name: "Face Pull (Band/Dumbbell Variation)", sets: 3, reps: 12, weight: true },
      { name: "Hammer Curls", sets: 3, reps: 12, weight: true }
    ]
  },
  {
    name: "Day 5 — AMRAP + Conditioning",
    exercises: [
      { name: "Pull-Ups", sets: 3, amrap: true },
      { name: "Push-Ups", sets: 3, amrap: true }
    ]
  },
  {
    name: "Day 6 — Extra Cardio",
    exercises: [
      { name: "Cardio Session", sets: 1, reps: 1, isYoga: true }
    ]
  }
];

/* ===========================
   DATA STORAGE
=========================== */

const LS = {
  get(key) { return JSON.parse(localStorage.getItem(key)); },
  set(key, val) { localStorage.setItem(key, JSON.stringify(val)); },
  remove(key) { localStorage.removeItem(key); }
};

function key(...parts) {
  return parts.join("_");
}

function currentWeek() {
  return Number(LS.get("week") || 1);
}

/* ===========================
   RENDERING
=========================== */

const weekSelect = document.getElementById("weekSelect");
const weekDisplay = document.getElementById("weekDisplay");
const daysContainer = document.getElementById("daysContainer");

function initWeekSelect() {
  for (let i = 1; i <= 12; i++) {
    const opt = document.createElement("option");
    opt.value = i;
    opt.textContent = "Week " + i;
    weekSelect.appendChild(opt);
  }
  weekSelect.value = currentWeek();
  weekDisplay.textContent = currentWeek();

  weekSelect.addEventListener("change", () => {
    LS.set("week", weekSelect.value);
    weekDisplay.textContent = weekSelect.value;
    renderProgram();
  });
}

function renderProgram() {
  daysContainer.innerHTML = "";

  PROGRAM.forEach((day, dayIndex) => {
    const div = document.createElement("div");
    div.className = "day";

    const header = document.createElement("div");
    header.className = "day-header";
    header.textContent = day.name;

    const content = document.createElement("div");
    content.style.display = "none";

    header.addEventListener("click", () => {
      content.style.display = content.style.display === "none" ? "block" : "none";
    });

    div.appendChild(header);
    div.appendChild(content);

    day.exercises.forEach((ex, exIndex) => {
      const exDiv = document.createElement("div");
      exDiv.className = "exercise";

      const title = document.createElement("div");
      title.textContent = `${ex.name}`;
      exDiv.appendChild(title);

      if (ex.amrap) {
        renderAMRAPExercise(exDiv, dayIndex, exIndex, ex);
      } else if (ex.isYoga) {
        renderYogaExercise(exDiv, dayIndex, exIndex);
      } else {
        renderStandardExercise(exDiv, dayIndex, exIndex, ex);
      }

      content.appendChild(exDiv);
    });

    daysContainer.appendChild(div);
  });
}

/* ===========================
   SET BUTTONS
=========================== */

function renderStandardExercise(container, dayIndex, exIndex, ex) {
  const week = currentWeek();

  for (let s = 1; s <= ex.sets; s++) {
    const setRow = document.createElement("div");
    setRow.className = "set-row";

    const btn = document.createElement("button");
    btn.className = "set-btn";

    const saved = LS.get(key("set", week, dayIndex, exIndex, s)) || false;
    if (saved) btn.classList.add("completed");

    btn.textContent = s;

    btn.addEventListener("click", e => {
      e.stopPropagation();
      const newVal = !saved;
      LS.set(key("set", week, dayIndex, exIndex, s), newVal);
      btn.classList.toggle("completed");
    });

    setRow.appendChild(btn);

    const label = document.createElement("div");
    label.className = "muted";
    label.textContent = `${ex.reps} reps`;
    setRow.appendChild(label);

    container.appendChild(setRow);
  }

  // Weight adjustments
  if (ex.weight) {
    renderWeightAdjustment(container, dayIndex, exIndex);
  }
}

/* ===========================
   YOGA/CARDIO
=========================== */
function renderYogaExercise(container, dayIndex, exIndex) {
  const week = currentWeek();

  const row = document.createElement("div");
  row.className = "set-row";

  const btn = document.createElement("button");
  btn.className = "set-btn";
  btn.textContent = "✓";

  const saved = LS.get(key("yoga", week, dayIndex));
  if (saved) btn.classList.add("completed");

  btn.addEventListener("click", e => {
    e.stopPropagation();
    const newVal = !saved;
    LS.set(key("yoga", week, dayIndex), newVal);
    btn.classList.toggle("completed");
  });

  row.appendChild(btn);
  container.appendChild(row);
}

/* ===========================
   AMRAP EXERCISES
=========================== */

function renderAMRAPExercise(container, dayIndex, exIndex, ex) {
  const week = currentWeek();
  let totalReps = 0;
  const totalLabel = document.createElement("div");
  totalLabel.className = "amrap-total";

  for (let s = 1; s <= ex.sets; s++) {
    const row = document.createElement("div");
    row.className = "amrap-row";

    // -- Decrement button --
    const minus = document.createElement("button");
    minus.className = "amrap-adjust";
    minus.textContent = "-";

    // -- Input --
    const input = document.createElement("input");
    input.type = "number";
    input.inputmode = "numeric";
    input.pattern = "[0-9]*";
    input.className = "amrap-input";

    // Prevent collapsing the day
    ["click", "focus", "touchstart", "keydown"].forEach(evt => {
      input.addEventListener(evt, e => e.stopPropagation());
    });

    const saved = LS.get(key("amrap", week, dayIndex, exIndex, s)) || "";
    const last = LS.get(key("amrap", week - 1, dayIndex, exIndex, s)) || "";
    input.value = saved;

    if (saved) totalReps += Number(saved);

    // -- Increment button --
    const plus = document.createElement("button");
    plus.className = "amrap-adjust";
    plus.textContent = "+";

    // Save handler
    function save() {
      LS.set(key("amrap", week, dayIndex, exIndex, s), input.value);
      renderProgram(); // refresh totals live
    }

    minus.addEventListener("click", e => {
      e.stopPropagation();
      input.value = Math.max(0, Number(input.value || 0) - 1);
      save();
    });

    plus.addEventListener("click", e => {
      e.stopPropagation();
      input.value = Number(input.value || 0) + 1;
      save();
    });

    input.addEventListener("blur", save);

    // Last week ref
    const lastLabel = document.createElement("div");
    lastLabel.className = "muted";
    lastLabel.textContent = `(last: ${last || 0})`;

    row.appendChild(minus);
    row.appendChild(input);
    row.appendChild(plus);
    row.appendChild(lastLabel);

    container.appendChild(row);
  }

  totalLabel.textContent = `Total today: ${totalReps} reps`;
  container.appendChild(totalLabel);
}

/* ===========================
   WEIGHT ADJUSTMENTS
=========================== */

function renderWeightAdjustment(container, dayIndex, exIndex) {
  const week = currentWeek();
  const nextWeek = week === 12 ? 1 : week + 1;
  const row = document.createElement("div");

  const label = document.createElement("div");
  label.className = "weight-label";
  label.textContent = "Next Week Weight Adjustment:";
  container.appendChild(label);

  const deltas = [-10, -5, -3, -2, 0, 2, 3, 5, 10];
  const wrap = document.createElement("div");
  wrap.style.display = "flex";
  wrap.style.flexWrap = "wrap";
  wrap.style.gap = "8px";

  deltas.forEach(delta => {
    const btn = document.createElement("button");
    btn.className = "adjust-btn";
    btn.textContent = delta > 0 ? "+" + delta : delta;

    btn.addEventListener("click", e => {
      e.stopPropagation();
      LS.set(key("weightNext", nextWeek, dayIndex, exIndex), delta);
      renderProgram();
    });

    wrap.appendChild(btn);
  });

  const clr = document.createElement("button");
  clr.className = "adjust-clear";
  clr.textContent = "Clear";

  clr.addEventListener("click", e => {
    e.stopPropagation();
    LS.remove(key("weightNext", nextWeek, dayIndex, exIndex));
    renderProgram();
  });

  wrap.appendChild(clr);
  container.appendChild(wrap);
}

/* ===========================
   RESET
=========================== */

document.getElementById("resetBtn").addEventListener("click", () => {
  if (confirm("Clear ALL saved data?")) {
    localStorage.clear();
    location.reload();
  }
});

/* ===========================
   WAKE LOCK
=========================== */

let wakeLock = null;
async function enableWakeLock() {
  try {
    wakeLock = await navigator.wakeLock.request("screen");
  } catch (err) { }
}

document.body.addEventListener("click", () => enableWakeLock(), { once: true });

/* ===========================
   INIT
=========================== */

initWeekSelect();
renderProgram();
</script>
</body>
</html>
